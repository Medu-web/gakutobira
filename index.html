<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学トビラ</title>
    <style>
        /* ------------------------------------- */
        /* 共通スタイル */
        /* ------------------------------------- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            text-align: center;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }

        h1 {
            color: #0056b3;
            margin-bottom: 5px;
            font-size: 2.2em;
            padding-top: 10px;
        }

        .subtitle {
            color: #555;
            margin-bottom: 25px;
            font-size: 1.1em;
            font-weight: bold;
        }

        /* ------------------------------------- */
        /* ボタンとセクションのスタイル */
        /* ------------------------------------- */
        .section-title {
            font-size: 1.8em;
            color: #007bff;
            margin-top: 30px;
            margin-bottom: 20px;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            display: inline-block;
        }

        #link-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            padding-top: 10px;
        }

        .link-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 18px 25px;
            background-color: #e9f7ff;
            color: #0056b3;
            text-decoration: none;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
            font-size: 1.1em;
            font-weight: 600;
            border: 2px solid #b3e0ff;
        }

        .link-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            background-color: #d9efff;
        }

        /* アニメーション用クラス */
        .animate-pop {
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .door-icon {
            /* ドアのアイコンの代わり（ここでは簡単なマークを使用） */
            display: inline-block;
            width: 1.2em;
            height: 1.2em;
            margin-right: 10px;
            background-color: #007bff;
            border-radius: 4px;
            /* 扉の取っ手を模したデザイン */
            position: relative;
        }
        .door-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 2px;
            transform: translateY(-50%);
            width: 3px;
            height: 6px;
            background-color: #ffffff;
            border-radius: 1px;
        }

        /* ------------------------------------- */
        /* メディアクエリ（モバイル対応） */
        /* ------------------------------------- */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 1.8em;
            }
            .section-title {
                font-size: 1.5em;
            }
            #link-container {
                grid-template-columns: 1fr; /* モバイルでは1列にする */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>学トビラ</h1>
        <p class="subtitle">学校生活をサポートする各種ポータルサイトへの入り口です。</p>

        <h2 id="main-section-title" class="section-title">ポータル</h2>
        
        <div id="link-container">
            <!-- リンクはJavaScriptによってここに動的に挿入されます -->
        </div>
    </div>

    <script>
        /* ------------------------------------- */
        /* データ定義 - 小学校6学年、中学校3学年を定義し、リンク名を修正 */
        /* ------------------------------------- */
        const portalData = {
            // --- (A) 共通ポータル (Default) ---
            'default': {
                title: '学トビラ - 全校共通ポータル',
                links: [
                    { name: '共通お知らせ', url: 'https://example.com/general-news' },
                    { name: '学習サポート資料', url: 'https://example.com/study-support' },
                    { name: '小学校へ', url: '#schoolA_e' },
                    { name: '中学校へ', url: '#schoolB_j' },
                ]
            },

            // --- (B) 小学校 (Elementary School) ---
            'schoolA_e': {
                title: 'ひまわり小学校',
                links: [
                    // 6 学年を定義
                    { name: '1年生', url: '#schoolA_e-1' },
                    { name: '2年生', url: '#schoolA_e-2' },
                    { name: '3年生', url: '#schoolA_e-3' },
                    { name: '4年生', url: '#schoolA_e-4' },
                    { name: '5年生', url: '#schoolA_e-5' },
                    { name: '6年生', url: '#schoolA_e-6' },
                    // 全校共通の扉を削除し、学校共通ポータルに変更
                    { name: '学校共通ポータル', url: 'https://example.com/elementary-common' },
                ]
            },

            // --- (C) 中学校 (Junior High School) ---
            'schoolB_j': {
                title: 'けやき中学校',
                links: [
                    // 3 学年を定義
                    { name: '1年生', url: '#schoolB_j-1' },
                    { name: '2年生', url: '#schoolB_j-2' },
                    { name: '3年生', url: '#schoolB_j-3' },
                    // 全校共通の扉を削除し、学校共通ポータルに変更
                    { name: '学校共通ポータル', url: 'https://example.com/juniorhigh-common' },
                ]
            },

            // --- (D) 学年ポータル (Grade-Specific Examples - 小学校) ---
            'schoolA_e-1': {
                title: 'ひまわり小学校 1年生の部屋',
                links: [
                    { name: '今日の時間割', url: 'https://example.com/e1-schedule' },
                    { name: '算数の宿題', url: 'https://example.com/e1-math-hw' },
                    { name: '学校へ戻る', url: '#schoolA_e' },
                    { name: '全校共通へ', url: '#default' },
                ]
            },
            'schoolA_e-6': {
                title: 'ひまわり小学校 6年生の部屋',
                links: [
                    { name: '卒業文集の進捗', url: 'https://example.com/e6-graduation' },
                    { name: '中学校紹介', url: 'https://example.com/e6-jhs' },
                    { name: '学校へ戻る', url: '#schoolA_e' },
                    { name: '全校共通へ', url: '#default' },
                ]
            },
            
            // --- (E) 学年ポータル (Grade-Specific Examples - 中学校) ---
            'schoolB_j-3': {
                title: 'けやき中学校 3年生の部屋',
                links: [
                    { name: '進路情報', url: 'https://example.com/j3-career' },
                    { name: '定期テスト範囲', url: 'https://example.com/j3-exam' },
                    { name: '学校へ戻る', url: '#schoolB_j' },
                    { name: '全校共通へ', url: '#default' },
                ]
            },
            
            // その他の学年 ('schoolA_e-2', 'schoolA_e-3', 'schoolA_e-4', 'schoolA_e-5', 'schoolB_j-1', 'schoolB_j-2') 
            // のデータは、ここでは省略しますが、同様の構造で追加できます。
        };

        /* ------------------------------------- */
        /* JavaScriptロジック */
        /* ------------------------------------- */

        // リンクがクリックされたときのアニメーションをアタッチ
        function attachAnimationListeners() {
            document.querySelectorAll('.link-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    // URLがハッシュリンクでない場合は通常通り遷移
                    if (!this.href.includes('#')) {
                        return;
                    }
                    
                    e.preventDefault();
                    
                    // アニメーションを一時的に無効化
                    const container = document.getElementById('link-container');
                    container.style.opacity = 0;
                    container.style.transition = 'opacity 0.2s';
                    
                    // 遷移後にアニメーションを再開
                    setTimeout(() => {
                        window.location.hash = this.hash;
                        container.style.opacity = 1;
                        container.style.transition = 'opacity 0.3s';
                        // renderPortalがhashchangeイベントで呼び出される
                    }, 200);
                });
            });
        }

        /**
         * URLのハッシュに基づいてポータルをレンダリングします。
         */
        function renderPortal() {
            let hash = window.location.hash.slice(1); // #を削除
            let currentKey = hash || 'default'; // ハッシュがない場合は'default'を使用
            let data = portalData[currentKey];

            // データが存在しない場合のフォールバック処理
            if (!data) {
                // ハッシュキーから「学校キー」（例: schoolA_e-1からschoolA_e）を抽出
                const parts = currentKey.split('-');
                if (parts.length > 1) {
                    const schoolFallbackKey = parts.slice(0, parts.length - 1).join('-');
                    if (portalData[schoolFallbackKey]) {
                        currentKey = schoolFallbackKey; // 学校ポータルへフォールバック
                        data = portalData[schoolFallbackKey];
                     }
                }

                // 最終的にデータが見つからなければ'default'を使用
                if (!data) {
                    currentKey = 'default';
                    data = portalData[currentKey];
                }
            }


            const container = document.getElementById('link-container');
            const titleElement = document.getElementById('main-section-title');

            // タイトルを更新
            titleElement.textContent = data.title;
            
            // 既存のコンテンツをクリア
            container.innerHTML = '';

            // リンクを動的に生成
            data.links.forEach(link => {
                const linkElement = document.createElement('a');
                // ハッシュリンクの場合、アニメーションが再アタッチされるため、ここではそのまま
                linkElement.href = link.url; 
                linkElement.className = 'link-button animate-pop';
                
                // HTML構造を構築
                linkElement.innerHTML = `<span class="door-icon"></span><span class="button-text">${link.name}</span>`;
                container.appendChild(linkElement);
            });
            
            // 動的に生成されたリンクにアニメーションリスナーを再設定
            attachAnimationListeners();
        }

        // ページロード時とハッシュ変更時にレンダリング
        document.addEventListener('DOMContentLoaded', renderPortal);
        window.addEventListener('hashchange', renderPortal); 
        
        // 最初のロード時にハッシュがあれば即座にレンダリングを実行
        if (window.location.hash) {
            renderPortal();
        }
    </script>
</body>
</html>
